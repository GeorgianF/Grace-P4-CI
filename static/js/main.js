// NAV BAR Animation JS
const menuBtn = document.querySelector('.menu-btn');
const navBar = document.querySelector('.nav-container');
const cards = document.querySelectorAll('.card-menu');
const placeholder = document.querySelectorAll("input");
let menuOpen = false;

// Function for the menu button animation

menuBtn.addEventListener('click', hideContentShowNav);

function hideContentShowNav() {
  if(!menuOpen) {
    menuBtn.classList.add('open');
    menuOpen = true;
    navBar.style.right = '0';

  } else {
    menuBtn.classList.remove('open');
    menuOpen = false;
    navBar.style.right = '-350px';
  }
}

// Function for the card flip animation for the menu.html

cards.forEach(card => {card.addEventListener("click", 
  function () 
  {
    card.classList.add('flipped');
    setTimeout(() => {
      card.classList.remove('flipped');
    }, 10000);
  });
});


// DATE PICKER EVENTS

$(function () {
  var today = new Date();
  var tomorrow = new Date();
  tomorrow.setDate(today.getDate() + 1);
  $("#datepicker, #datepicker1").datepicker({
    format: 'dd/mm/yyyy',
    startDate : tomorrow,
    filter: function(date) {
      if (date.getDay() == 0) {
        return false; // Disable all Sundays.
      }
    }
    });
});

// MESSAGES

setTimeout(function(){
  if ($('#msg').length > 0) {
    $('#msg').remove();
  }
}, 3000);


// Remove placeholders in input generated by Django

$(placeholder).removeAttr('placeholder');

// Set max number for number of persons that can book a table

$(document).ready(function() {
  $(':input[type="number"]').attr({
     "max" : 6,
     "min" : 1
  });
});


// Filter data on the view reservation page

const userID = document.querySelector('#user-name-span').innerText;
const myReservation = document.querySelector('#view-my-reservations-button');
const r = document.querySelectorAll('.booking-row');

console.log(r)
console.log(userID)

function filterUser() {
  r.forEach(row => {
    row.classList.add('d-none');
    if (row.innerText.includes(userID)) {
      row.classList.remove('d-none')
    }
  })
}

$(myReservation).on("click", filterUser);

// Unfilter data on the the view reservation page

const allReservation = document.querySelector('#view-all-reservations-button')

function unfilterUser() {
  r.forEach(row => {
    row.classList.remove('d-none');
  })
}

$(allReservation).on("click", unfilterUser);
